<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DocuManager | Secure Document Management</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="container">
            <div class="logo">
                <h1><i class="fas fa-file-alt"></i> DocuManager</h1>
            </div>
            <div class="header-content">
                <nav>
                    <ul>
                        <li><a href="#home" class="active">Home</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#documents">Documents</a></li>
                        <li><a href="#about">About</a></li>
                    </ul>
                </nav>
                <div class="auth-buttons">
                    <button id="profileBtn" class="btn btn-outline" onclick="window.location.href='profile.html'">Profile</button>
                    <button id="logoutBtn" class="btn btn-outline" onclick="handleLogout()">Logout</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h1>Secure Document Management Made Simple</h1>
                <p>Organize, share, and protect your important documents with our intuitive platform. Access your files anytime, anywhere with enterprise-grade security.</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary btn-large" onclick="showDemo()">Get Started</button>
                    <button class="btn btn-outline btn-large" onclick="window.location.href='#features'">Learn More</button>
                </div>
            </div>
            <div class="hero-image">
                <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80" alt="Document Management">
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <div class="section-header">
                <h2>Powerful Features</h2>
                <p>Everything you need to manage your documents efficiently</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Bank-Grade Security</h3>
                    <p>All documents are encrypted and securely stored with military-grade protection.</p>
                </div>
                <div class="feature-card">
                    <div class="icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <h3>Easy Upload</h3>
                    <p>Drag and drop interface makes uploading documents simple and intuitive.</p>
                </div>
                <div class="feature-card">
                    <div class="icon">
                        <i class="fas fa-share-alt"></i>
                    </div>
                    <h3>Simple Sharing</h3>
                    <p>Share documents with colleagues or clients with customizable permissions.</p>
                </div>
                <div class="feature-card">
                    <div class="icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3>Smart Search</h3>
                    <p>Find any document instantly with our powerful search capabilities.</p>
                </div>
                <div class="feature-card">
                    <div class="icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3>Mobile Access</h3>
                    <p>Access your documents on any device with our responsive design.</p>
                </div>
                <div class="feature-card">
                    <div class="icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <h3>Version Control</h3>
                    <p>Track document changes and revert to previous versions when needed.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Documents Section -->
    <section class="documents" id="documents">
        <div class="container">
            <div class="section-header">
                <h2>Your Documents</h2>
                <p>Manage all your important files in one secure location</p>
            </div>
            <div class="document-controls">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search documents...">
                    <button><i class="fas fa-search"></i></button>
                </div>
                <button class="btn btn-primary" onclick="openUploadArea()">
                    <i class="fas fa-plus"></i> Upload Document
                </button>
            </div>
            <div class="upload-area" id="uploadArea">
                <div class="upload-content">
                    <div class="upload-header">
                        <h3><i class="fas fa-cloud-upload-alt"></i> Upload Documents</h3>
                        <p>Drag & drop files here or click to browse</p>
                    </div>
                    <div class="upload-options">
                        <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                            <i class="fas fa-folder-open"></i> Browse Files
                        </button>
                        <button class="btn btn-outline" onclick="closeUploadArea()">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                    <input type="file" id="fileInput" multiple style="display: none;" onchange="handleFileSelect(event)">
                    <div class="upload-info">
                        <p><i class="fas fa-info-circle"></i> Supported formats: PDF, DOC, DOCX, XLS, XLSX, JPG, PNG</p>
                        <p><i class="fas fa-exclamation-circle"></i> Maximum file size: 10MB per file</p>
                    </div>
                </div>
            </div>
            <div class="document-table">
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Size</th>
                            <th>Date Modified</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="documentsTableBody">
                        <!-- Documents will be loaded here dynamically -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <h2>About DocuManager</h2>
                    <p>DocuManager is a cutting-edge document management solution designed to simplify how businesses organize, store, and share their critical documents. Our platform combines intuitive design with robust security features to provide an unparalleled user experience.</p>
                    <p>Founded in 2020, our team of experts has helped thousands of organizations streamline their document workflows and improve productivity while maintaining the highest standards of data security.</p>
                    <ul>
                        <li><i class="fas fa-check-circle"></i> Trusted by over 10,000 businesses worldwide</li>
                        <li><i class="fas fa-check-circle"></i> 99.9% uptime guarantee</li>
                        <li><i class="fas fa-check-circle"></i> GDPR and HIPAA compliant</li>
                        <li><i class="fas fa-check-circle"></i> 24/7 customer support</li>
                    </ul>
                </div>
                <div class="about-image">
                    <img src="https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80" alt="Team Collaboration">
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h2><i class="fas fa-file-alt"></i> DocuManager</h2>
                    <p>Secure document management solution for businesses of all sizes. Organize, share, and protect your important files with confidence.</p>
                </div>
                <div class="footer-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#documents">Documents</a></li>
                        <li><a href="#about">About Us</a></li>
                    </ul>
                </div>
                
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 DocuManager. All rights reserved. Made with <i class="fas fa-heart"></i> by Sitaram Manepalli for secure document management.</p>
            </div>
        </div>
    </footer>

    <!-- Demo Modal -->
    <div id="demoModal" class="demo-modal">
        <div class="demo-modal-content">
            <div class="demo-modal-header">
                <h2>Getting Started Guide</h2>
                <button class="close-demo">&times;</button>
            </div>
            <div class="demo-modal-body">
                <div class="tutorial-steps">
                    <h3>How to Use DocuManager</h3>
                    <ul class="tree-view">
                        <li>Getting Started
                            <ul>
                                <li>Create Account
                                    <ul>
                                        <li>Visit Registration Page</li>
                                        <li>Enter Username & Access Code</li>
                                        <li>Complete Registration</li>
                                    </ul>
                                </li>
                                <li>Login Process
                                    <ul>
                                        <li>Navigate to Login Page</li>
                                        <li>Enter Your 6-Digit Code</li>
                                        <li>Access Your Dashboard</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>Managing Documents
                            <ul>
                                <li>Uploading Files
                                    <ul>
                                        <li>Click "Upload Document"</li>
                                        <li>Drag & Drop or Browse Files</li>
                                        <li>Confirm Upload</li>
                                    </ul>
                                </li>
                                <li>Organizing Files
                                    <ul>
                                        <li>Create Folders</li>
                                        <li>Move Documents</li>
                                        <li>Add Tags & Descriptions</li>
                                    </ul>
                                </li>
                                <li>Sharing Documents
                                    <ul>
                                        <li>Select Document</li>
                                        <li>Click Share Button</li>
                                        <li>Set Permissions</li>
                                        <li>Send Link</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>Advanced Features
                            <ul>
                                <li>Search & Filter
                                    <ul>
                                        <li>Use Search Bar</li>
                                        <li>Apply Filters</li>
                                        <li>Sort Results</li>
                                    </ul>
                                </li>
                                <li>Version Control
                                    <ul>
                                        <li>View Document History</li>
                                        <li>Compare Versions</li>
                                        <li>Restore Previous Versions</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="demo-image">
                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=400&q=80" alt="Document Management Interface">
                </div>
            </div>
        </div>
    </div>

    <script>
        // Check authentication status
        window.addEventListener('DOMContentLoaded', function() {
            const isAuthenticated = sessionStorage.getItem('authenticated');
            const profileBtn = document.getElementById('profileBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            
            if (!isAuthenticated) {
                // Redirect to login if not authenticated
                window.location.href = 'login.html';
                return;
            }
            
            // Set active nav link
            const navLinks = document.querySelectorAll('nav a');
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#home') {
                    link.classList.add('active');
                }
            });
            
            // Set up event listeners
            document.querySelector('.close-demo').addEventListener('click', closeDemo);
            
            window.addEventListener('click', function(event) {
                const demoModal = document.getElementById('demoModal');
                if (event.target === demoModal) {
                    closeDemo();
                }
            });
            
            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        window.scrollTo({
                            top: target.offsetTop - 80,
                            behavior: 'smooth'
                        });
                        
                        // Update active nav link
                        document.querySelectorAll('nav a').forEach(link => {
                            link.classList.remove('active');
                        });
                        this.classList.add('active');
                    }
                });
            });
            
            // Load user documents
            loadUserDocuments();
        });

        // Show demo modal
        function showDemo() {
            document.getElementById('demoModal').style.display = 'flex';
        }

        // Close demo modal
        function closeDemo() {
            document.getElementById('demoModal').style.display = 'none';
        }

        // Handle logout
        function handleLogout() {
            if (confirm('Are you sure you want to logout?')) {
                // Update last login time
                const users = JSON.parse(localStorage.getItem('docuManagerUsers') || '[]');
                const currentUser = sessionStorage.getItem('authenticatedUser');
                
                if (currentUser) {
                    const userData = JSON.parse(currentUser);
                    const userIndex = users.findIndex(u => u.username === userData.username);
                    if (userIndex !== -1) {
                        users[userIndex].lastLogin = new Date().toISOString();
                        localStorage.setItem('docuManagerUsers', JSON.stringify(users));
                    }
                }
                
                // Clear authentication data
                sessionStorage.removeItem('authenticated');
                sessionStorage.removeItem('authenticatedUser');
                
                // Redirect to login page
                window.location.href = 'login.html';
            }
        }

        // Document upload functionality
        function openUploadArea() {
            document.getElementById('uploadArea').style.display = 'block';
        }

        function closeUploadArea() {
            document.getElementById('uploadArea').style.display = 'none';
        }

        // Handle file selection for upload
        function handleFileSelect(event) {
            const files = event.target.files;
            if (files.length > 0) {
                // Get current user
                const currentUser = JSON.parse(sessionStorage.getItem('authenticatedUser'));
                if (currentUser) {
                    // Save documents to localStorage
                    saveUserDocuments(files, currentUser.username);
                    
                    // Reload document list
                    loadUserDocuments();
                    
                    // Show success message
                    alert(`Successfully uploaded ${files.length} file(s)!`);
                }
                closeUploadArea();
            }
        }

        // Save user documents to localStorage
        function saveUserDocuments(files, username) {
            // Get existing documents for this user
            const userDocsKey = `documents_${username}`;
            let userDocuments = JSON.parse(localStorage.getItem(userDocsKey) || '[]');
            
            // Add new documents
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const document = {
                    id: Date.now() + i, // Simple ID generation
                    name: file.name,
                    type: file.type.split('/')[1] || 'unknown',
                    size: file.size,
                    lastModified: new Date(file.lastModified).toISOString(),
                    uploadDate: new Date().toISOString()
                };
                userDocuments.push(document);
            }
            
            // Save updated documents list
            localStorage.setItem(userDocsKey, JSON.stringify(userDocuments));
        }

        // Load user documents from localStorage
        function loadUserDocuments() {
            // Get current user
            const currentUser = JSON.parse(sessionStorage.getItem('authenticatedUser'));
            if (!currentUser) return;
            
            // Get user's documents
            const userDocsKey = `documents_${currentUser.username}`;
            const userDocuments = JSON.parse(localStorage.getItem(userDocsKey) || '[]');
            
            // Get table body element
            const tableBody = document.getElementById('documentsTableBody');
            
            // Clear existing content
            tableBody.innerHTML = '';
            
            // Add documents to table
            if (userDocuments.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center;">No documents found. Upload your first document!</td>
                    </tr>
                `;
            } else {
                userDocuments.forEach(doc => {
                    // Format file size
                    const formattedSize = formatFileSize(doc.size);
                    
                    // Format date
                    const formattedDate = new Date(doc.lastModified).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric'
                    });
                    
                    // Get appropriate icon based on file type
                    const iconClass = getFileIconClass(doc.type);
                    
                    // Add row to table
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><i class="${iconClass}"></i> ${doc.name}</td>
                        <td>${doc.type.toUpperCase()}</td>
                        <td>${formattedSize}</td>
                        <td>${formattedDate}</td>
                        <td>
                            <button class="action-btn" title="Download" onclick="downloadDocument(${doc.id})"><i class="fas fa-download"></i></button>
                            <button class="action-btn" title="Share"><i class="fas fa-share-alt"></i></button>
                            <button class="action-btn" title="Delete" onclick="deleteDocument(${doc.id}, '${currentUser.username}')"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            }
        }

        // Format file size for display
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Get appropriate icon class based on file type
        function getFileIconClass(fileType) {
            const iconMap = {
                'pdf': 'fas fa-file-pdf',
                'doc': 'fas fa-file-word',
                'docx': 'fas fa-file-word',
                'xls': 'fas fa-file-excel',
                'xlsx': 'fas fa-file-excel',
                'ppt': 'fas fa-file-powerpoint',
                'pptx': 'fas fa-file-powerpoint',
                'jpg': 'fas fa-file-image',
                'jpeg': 'fas fa-file-image',
                'png': 'fas fa-file-image',
                'gif': 'fas fa-file-image',
                'txt': 'fas fa-file-alt',
                'zip': 'fas fa-file-archive',
                'rar': 'fas fa-file-archive'
            };
            
            return iconMap[fileType.toLowerCase()] || 'fas fa-file';
        }

        // Download document (simulated)
        function downloadDocument(docId) {
            alert('Document download would begin here in a real application.');
        }

        // Delete document
        function deleteDocument(docId, username) {
            if (confirm('Are you sure you want to delete this document?')) {
                // Get user's documents
                const userDocsKey = `documents_${username}`;
                let userDocuments = JSON.parse(localStorage.getItem(userDocsKey) || '[]');
                
                // Remove document with matching ID
                userDocuments = userDocuments.filter(doc => doc.id !== docId);
                
                // Save updated documents list
                localStorage.setItem(userDocsKey, JSON.stringify(userDocuments));
                
                // Reload document list
                loadUserDocuments();
                
                // Show success message
                alert('Document deleted successfully!');
            }
        }

        // Make upload area draggable
        document.addEventListener('DOMContentLoaded', function() {
            const uploadArea = document.getElementById('uploadArea');
            
            if (uploadArea) {
                uploadArea.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });
                
                uploadArea.addEventListener('dragleave', function() {
                    this.classList.remove('drag-over');
                });
                
                uploadArea.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        // Get current user
                        const currentUser = JSON.parse(sessionStorage.getItem('authenticatedUser'));
                        if (currentUser) {
                            // Save documents to localStorage
                            saveUserDocuments(files, currentUser.username);
                            
                            // Reload document list
                            loadUserDocuments();
                            
                            // Show success message
                            alert(`Successfully uploaded ${files.length} file(s)!`);
                        }
                        closeUploadArea();
                    }
                });
            }
        });
    </script>
</body>
</html>